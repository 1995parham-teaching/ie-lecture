---
index: 8
title: CGI
topics:
  - Introduction
---

<section>
  <h2>Introduction</h2>
  <ul>
    <li>HTML/XHTML content is static</li>
    <ul>
      <li>
        JavaScript makes pages more dynamic, but the content is almost static
      </li>
    </ul>
    <li>Dynamic content</li>
    <ul>
      <li>
        Pages that look differently depending on the user who visits, status,
        processing requests, etc.
      </li>
      <li>E.g. Search engines, web mails, etc.</li>
    </ul>
    <li>
      Web applications (hotel booking, web search applications, ‚Ä¶) is not
      possible using only HTML/XHTML, CSS and JS; why?
    </li>
  </ul>
</section>
<section>
  <h2>Typical Web based Application</h2>
  <p>
    We need server side active code to perform actions &amp; generate (dynamic)
    content
  </p>
  <img
    style="height: 25vh"
    src="./img/typical-server.png"
    alt="typical-server"
  />
</section>
<section>
  <h2>Common Gateway Interface</h2>
  <ul>
    <li>We need code beside web servers</li>
    <ul>
      <li>Web server by itself is not designed for data processing</li>
    </ul>
    <li>Initial idea</li>
    <ul>
      <li>An external program can perform the processing</li>
    </ul>
    <li>Questions</li>
    <ul>
      <li>How can client ask server to run an external program?!</li>
      <ul>
        <li>New HTTP Method to run (e.g. HTTP RUN)?!! ü§î</li>
      </ul>
      <li>
        How does web server exchange information with the external program?
      </li>
      <ul>
        <li>Sending input data &amp; Getting the output</li>
        <li>The mechanism should be standard</li>
      </ul>
    </ul>
  </ul>
</section>
<section>
  <h2>Common Gateway Interface (Cont.)</h2>
  <ul>
    <li>
      The Standard protocol for interfacing external application software with
      the web server
    </li>
    <ul>
      <li>CGI 1.1 specified in RFC 3875, 2004</li>
    </ul>
    <li>
      The external program runs by the
      <span class="hl-orange">standard HTTP</span> requests &amp; proper server
      <span class="hl-green">configuration</span>
    </li>
    <li>
      Information is passed from external software to the web server as the
      output on stdout
    </li>
    <ul>
      <li>
        HTTP response is the
        <span class="hl-yellow">output of the external program</span> on the
        server machine
      </li>
    </ul>
    <li>
      Information can passed from the web server to the executable program
      according to HTTP request method
    </li>
  </ul>
</section>
<section>
  <h2>CGI Example: Server Config</h2>
  <pre><code class="lang-apache">
&lt;IfDefine ENABLE_USR_LIB_CGI_BIN&gt;
	ScriptAlias /cgi-bin/ /var/www/html/IE/cgi-enabled/
	&lt;Directory "/var/www/html/IE/cgi-enabled/"&gt;
		AllowOverride None
		Options +ExecCGI -MultiViews 					  +SymLinksIfOwnerMatch
		Require all granted
	&lt;/Directory&gt;
&lt;/IfDefine&gt;
  </code></pre>
</section>
<section>
  <h2>CGI Example: Source Code</h2>
  <pre><code class="lang-c">
#include &lt;stdio.h&gt;

int main(void){
  // http header
	printf("Content-Type: text/html\r\n");
	printf("Connection: close\r\n");

	printf("\r\n \r\n");

  // http body
	printf("&lt;html&gt;&lt;head&gt;&lt;/head&gt;\r\n");
	printf("&lt;body&gt;\r\n");
	printf("Hello world.\r\n");
	printf("&lt;br /&gt;\r\n");
	printf("Bye Bye\r\n");
	printf("&lt;/body&gt;&lt;/html&gt;\r\n");
	return 0;
}
  </code></pre>
</section>
<section>
  <h2>CGI Example: Compile</h2>
  <pre><code class="plaintext">
&gt; ~# cd /var/www/html/IE/cgi-enabled
&gt; /var/www/html/IE/cgi-enabled# gcc -o hello_c.cgi hello_c.c
&gt; /var/www/html/IE/cgi-enabled# ./hello_c.cgi
Content-Type: text/html
Connection: close


&lt;html&gt;&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
Hello world.
&lt;br /&gt;
Bye Bye
&lt;/body&gt;&lt;/html&gt;
  </code></pre>
</section>
<section>
  <h2>CGI Example: Test</h2>
  <img src="./img/cgi-test.png" alt="cgi-test" />
</section>
<section>
  <h2>The ‚ÄúHello World‚Äù CGI in Bash Script</h2>
  <pre><code class="lang-bash">
#!/bin/bash

# http headers
echo "Content-Type: text/html"
echo ""

# http body
echo "&lt;html&gt;&lt;head&gt;&lt;/head&gt;"
echo "&lt;body&gt;"
echo "Hello world."
echo "&lt;br /&gt;"
echo "Bye Bye"
echo "&lt;/body&gt;&lt;/html&gt;"
  </code></pre>
</section>
<section>
  <h2>Getting parameters from the client</h2>
  <ul>
    <li>
      Parameters can be passed from the user to the CGI script through an html
      &lt;form&gt; or <code>fetch</code> or ...
    </li>
  </ul>
  <pre><code class="lang-html">
&lt;form action="script.cgi" method="GET"&gt;
  &lt;input type="‚Ä¶" name="input1" /&gt;
  &lt;input type="‚Ä¶" name="input2" /&gt;
  ‚Ä¶
  &lt;input type="‚Ä¶" name="inputN" /&gt;
&lt;/form&gt;
  </code></pre>
  <ul>
    <li>The script.cgi will get the parameters as:</li>
    <pre><code class="plaintext">
input1=val1&amp;input2=val2&amp; ... &amp;inputN=valN
    </code></pre>
    <li>The mechanism depends on the HTTP Method</li>
  </ul>
</section>
<section>
  <h2>Getting parameters from the client</h2>
  <ul>
    <li>Parameters can be sent through the GET method</li>
    <ul>
      <li>
        CGI script will receive the parameters from the web server in an
        environment variable <code class="hl-orange">$QUERY_STRING</code>
      </li>
      <li>
        In C: You can access it by
        <code class="hl-green">getenv("QUERY_STRING")</code>
      </li>
    </ul>
    <li>
      Parameters can be passed through the POST method (in the body of the HTTP
      Request)
    </li>
    <ul>
      <li>
        The CGI script will receive the parameters from the web server in the
        standard input (<code class="hl-yellow">stdin</code>)
      </li>
    </ul>
  </ul>
</section>
